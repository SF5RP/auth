# üîê User Service (Go + Next.js + Discord OAuth2)–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –±—ç–∫–µ–Ω–¥–æ–º –Ω–∞ Go –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ Next.js 15.## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Discord OAuth2- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã (Access + Refresh)- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π- ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ API –º–∞—Ä—à—Ä—É—Ç—ã- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI –Ω–∞ Next.js 15- ‚úÖ Redux Toolkit + React Query- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö- ‚úÖ Docker –ø–æ–¥–¥–µ—Ä–∂–∫–∞## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å GitHub Organization —Å –¥—Ä—É–≥–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º?**  ‚Üí [–î–µ–ø–ª–æ–π –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏](./docs/DEPLOY_EXISTING_ORG.md) ‚ö°–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [DEPLOYMENT.md](./docs/DEPLOYMENT.md)### –ö—Ä–∞—Ç–∫–æ:1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Discord Application** –∏ –ø–æ–ª—É—á–∏—Ç–µ Client ID/Secret2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**   ```bash   # –î–ª—è Docker   cp .env.example .env   # –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ backend   cp backend/env.example backend/config.env   ```3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**   ```bash   docker-compose up   ```   **–ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ:**   ```bash   # Backend   cd backend   go run cmd/migrator/main.go up  # –º–∏–≥—Ä–∞—Ü–∏–∏   go run main.go                  # —Å–µ—Ä–≤–µ—Ä   # Frontend (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)   cd frontend   npm install   npm run dev   ```–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ!## üì° API Endpoints### –ü—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞- `GET /login` - –ù–∞—á–∞–ª–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Discord- `GET /callback` - –û–±—Ä–∞–±–æ—Ç–∫–∞ callback –æ—Ç Discord OAuth2### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω)- `GET /me` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ- `POST /refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞### –ê–¥–º–∏–Ω—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ç—Ä–µ–±—É—é—Ç —Ä–æ–ª—å admin)- `GET /admin/users` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π- `POST /admin/users/:id/role` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞```auth/‚îú‚îÄ‚îÄ main.go                    # Backend —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞‚îú‚îÄ‚îÄ config.env                 # Backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è‚îú‚îÄ‚îÄ cmd/‚îÇ   ‚îî‚îÄ‚îÄ migrator/             # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î‚îú‚îÄ‚îÄ internal/                 # Backend –∫–æ–¥‚îÇ   ‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è‚îÇ   ‚îú‚îÄ‚îÄ database/            # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ë–î‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Middleware (auth, CORS)‚îÇ   ‚îú‚îÄ‚îÄ models/              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö‚îÇ   ‚îî‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞‚îú‚îÄ‚îÄ migrations/              # SQL –º–∏–≥—Ä–∞—Ü–∏–∏‚îú‚îÄ‚îÄ frontend/                # Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ‚îÇ   ‚îú‚îÄ‚îÄ src/‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/            # Next.js —Å—Ç—Ä–∞–Ω–∏—Ü—ã‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features/       # Feature-–º–æ–¥—É–ª–∏‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared/         # –û–±—â–∏–π –∫–æ–¥‚îÇ   ‚îî‚îÄ‚îÄ package.json‚îú‚îÄ‚îÄ docker-compose.yml       # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è‚îú‚îÄ‚îÄ DEPLOYMENT.md           # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é‚îî‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª```## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **PostgreSQL** –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:### –¢–∞–±–ª–∏—Ü—ã:- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å Discord –¥–∞–Ω–Ω—ã–º–∏ –∏ —Ä–æ–ª—è–º–∏  - `id`, `discord_id`, `username`, `discriminator`, `avatar`, `role`, `created_at`- `refresh_tokens` - refresh —Ç–æ–∫–µ–Ω—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access —Ç–æ–∫–µ–Ω–æ–≤  - `id`, `user_id`, `token`, `expires_at`, `created_at`### –ú–∏–≥—Ä–∞—Ü–∏–∏:```bash# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏go run cmd/migrator/main.go up# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏go run cmd/migrator/main.go down```## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/login`2. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Discord OAuth23. –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Discord –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/callback`4. –°–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç –∫–æ–¥ –Ω–∞ access_token –∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è5. –°–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î6. –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JWT access –∏ refresh —Ç–æ–∫–µ–Ω—ã7. –¢–æ–∫–µ–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É## üé≠ –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π- `user` - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)- `moderator` - –º–æ–¥–µ—Ä–∞—Ç–æ—Ä- `admin` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞```user-service/‚îú‚îÄ‚îÄ backend/           # Go Backend‚îÇ   ‚îú‚îÄ‚îÄ cmd/          # CLI —É—Ç–∏–ª–∏—Ç—ã‚îÇ   ‚îú‚îÄ‚îÄ internal/     # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞‚îÇ   ‚îú‚îÄ‚îÄ migrations/   # SQL –º–∏–≥—Ä–∞—Ü–∏–∏‚îÇ   ‚îî‚îÄ‚îÄ main.go       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞‚îÇ‚îú‚îÄ‚îÄ frontend/         # Next.js Frontend‚îÇ   ‚îî‚îÄ‚îÄ src/         # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã‚îÇ‚îú‚îÄ‚îÄ docs/            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è‚îú‚îÄ‚îÄ deploy/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–ø–ª–æ—è‚îú‚îÄ‚îÄ scripts/         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã‚îî‚îÄ‚îÄ .github/         # CI/CD```## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏### Backend- **Go 1.22+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫- **Gin** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö- **JWT** - —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏- **Discord OAuth2** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è### Frontend- **Next.js 15** - React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å App Router- **React 19** + **TypeScript** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞- **Redux Toolkit** - –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ- **React Query** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º- **Emotion** - CSS-in-JS —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è- **react-hook-form** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–º–∏## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–Ω–æ–ø–∫–æ–π –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Discord### –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –∞–≤–∞—Ç–∞—Ä, –∏–º—è, —Ä–æ–ª—å, –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏### –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö —Ä–æ–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è- [üìñ DEPLOYMENT.md](./DEPLOYMENT.md) - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é- [üìù init.md](./init.md) - –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å- [üìä PROJECT_STATUS.md](./PROJECT_STATUS.md) - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞- [üìÅ frontend/README.md](./frontend/README.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ```bash# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend API./test-api.sh       # Linux/Mac./test-api.ps1      # Windows# Health checkcurl http://localhost:8080/health```## üê≥ Docker```bash# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ (–ë–î + Backend + Frontend)docker-compose up -d# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤docker-compose logs -f# –û—Å—Ç–∞–Ω–æ–≤–∫–∞docker-compose down```## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏- [ ] –î–æ–±–∞–≤–∏—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana)- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit –∏ e2e —Ç–µ—Å—Ç—ã- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥—Ä—É–≥–∏—Ö OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–º–Ω—É—é —Ç–µ–º—É –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è Pull Request'—ã –∏ Issues!## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—èMIT---‚≠ê **–ó–≤–µ–∑–¥—É –ø—Ä–æ–µ–∫—Ç—É, –µ—Å–ª–∏ –æ–Ω –≤–∞–º –ø–æ–º–æ–≥!**